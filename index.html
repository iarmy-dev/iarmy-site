<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iArmy - Une arm√©e de robots pour ton quotidien</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23FF6B35'/><text x='50' y='68' font-family='Arial' font-size='55' font-weight='bold' fill='white' text-anchor='middle'>i</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Space Grotesk', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #030303; color: white; min-height: 100vh; overflow-x: hidden; }
    
    .bg-gradient-animate { 
      background: linear-gradient(135deg, #030303 0%, #0a0508 25%, #050808 50%, #080805 75%, #030303 100%); 
      background-size: 400% 400%; 
      animation: gradientShift 20s ease infinite; 
    }
    @keyframes gradientShift { 
      0% { background-position: 0% 50%; } 
      50% { background-position: 100% 50%; } 
      100% { background-position: 0% 50%; } 
    }
    
    .orb { 
      position: fixed; 
      border-radius: 50%; 
      filter: blur(100px); 
      animation: float 15s ease-in-out infinite; 
      pointer-events: none; 
      z-index: 0; 
    }
    .orb-1 { width: 500px; height: 500px; background: linear-gradient(135deg, #FF6B35, #FF8B5E); top: -250px; right: -150px; opacity: 0.18; }
    .orb-2 { width: 400px; height: 400px; background: linear-gradient(135deg, #6B35FF, #8B5EFF); bottom: -200px; left: -150px; opacity: 0.18; animation-delay: -7s; }
    .orb-3 { width: 250px; height: 250px; background: linear-gradient(135deg, #35FFB8, #5EFFD4); top: 50%; left: 30%; opacity: 0.1; animation-delay: -3s; }
    @keyframes float { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -30px) scale(1.05); } 66% { transform: translate(-20px, 20px) scale(0.95); } }
    
    .glass { 
      background: rgba(255, 255, 255, 0.02); 
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.05); 
    }
    .glass-card { 
      background: rgba(255, 255, 255, 0.02); 
      border: 1px solid rgba(255, 255, 255, 0.06); 
      border-radius: 24px; 
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4); 
      transition: all 0.4s ease; 
    }
    .glass-card:hover { 
      background: rgba(255, 255, 255, 0.04); 
      border-color: rgba(255, 255, 255, 0.1); 
      transform: translateY(-4px); 
    }
    
    .logo-i { 
      width: 40px; 
      height: 40px; 
      background: linear-gradient(135deg, #FF6B35 0%, #FF8B5E 100%); 
      border-radius: 12px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: 800; 
      font-size: 20px; 
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
      cursor: pointer;
    }
    .logo-i:hover { 
      transform: scale(1.2) rotate(-15deg); 
      box-shadow: 0 12px 40px rgba(255,107,53,0.6); 
    }
    
    #login-form, #register-form {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .slide-out-left {
      animation: slideOutLeft 0.3s ease forwards;
    }
    
    .slide-in-right {
      animation: slideInRight 0.3s ease forwards;
    }
    
    .slide-out-right {
      animation: slideOutRight 0.3s ease forwards;
    }
    
    .slide-in-left {
      animation: slideInLeft 0.3s ease forwards;
    }
    
    @keyframes slideOutLeft {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(-30px);
      }
    }
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideOutRight {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(30px);
      }
    }
    
    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .btn-primary { 
      background: linear-gradient(135deg, #FF6B35 0%, #FF8B5E 100%); 
      padding: 14px 28px; 
      border-radius: 14px; 
      font-weight: 600; 
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
      border: none; 
      color: white; 
      cursor: pointer; 
      position: relative; 
      overflow: hidden; 
    }
    .btn-primary::before { 
      content: ''; 
      position: absolute; 
      top: 0; 
      left: -100%; 
      width: 100%; 
      height: 100%; 
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); 
      transition: left 0.6s ease; 
    }
    .btn-primary:hover { 
      transform: translateY(-4px) scale(1.02); 
      box-shadow: 0 15px 40px rgba(255,107,53,0.5); 
    }
    .btn-primary:hover::before { left: 100%; }
    
    .btn-secondary { 
      background: rgba(255,255,255,0.04); 
      border: 1px solid rgba(255,255,255,0.08); 
      padding: 12px 24px; 
      border-radius: 12px; 
      font-weight: 500; 
      transition: all 0.3s; 
      color: white; 
      cursor: pointer; 
    }
    .btn-secondary:hover { 
      background: rgba(255,255,255,0.08); 
      border-color: rgba(255,255,255,0.15); 
    }
    
    .btn-logout {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05));
      border: 1px solid rgba(239, 68, 68, 0.3);
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      color: #ef4444;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    .btn-logout:hover {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.25), rgba(239, 68, 68, 0.1));
      border-color: rgba(239, 68, 68, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
      color: #f87171;
    }
    
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes floatY { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
    @keyframes glide { 0% { left: 0; opacity: 0; } 15% { opacity: 1; } 85% { opacity: 1; } 100% { left: calc(100% - 36px); opacity: 0; } }
    
    .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
    .animate-fade-in-down { animation: fadeInDown 0.5s ease-out forwards; }
    .animate-float { animation: floatY 4s ease-in-out infinite; }
    .delay-100 { animation-delay: 0.1s; opacity: 0; }
    .delay-200 { animation-delay: 0.2s; opacity: 0; }
    .delay-300 { animation-delay: 0.3s; opacity: 0; }
    
    .iphone { 
      width: 220px; 
      background: linear-gradient(145deg, #2a2a2a, #1a1a1a); 
      border-radius: 36px; 
      padding: 10px; 
      box-shadow: 0 0 0 2px rgba(255,255,255,0.1), 0 30px 60px rgba(0,0,0,0.5); 
    }
    .iphone-screen { background: #000; border-radius: 28px; overflow: hidden; }
    .iphone-notch { 
      width: 90px; 
      height: 24px; 
      background: #000; 
      border-radius: 0 0 16px 16px; 
      margin: 0 auto; 
      position: relative; 
    }
    
    .telegram-header { 
      background: #1c1c1e; 
      padding: 8px 12px; 
      display: flex; 
      align-items: center; 
      gap: 10px; 
    }
    .telegram-back { color: #0a84ff; font-size: 20px; }
    .telegram-avatar { 
      width: 30px; 
      height: 30px; 
      background: linear-gradient(135deg, #FF6B35, #FF8B5E); 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: 800; 
      font-size: 12px; 
    }
    .telegram-name { font-size: 14px; font-weight: 600; }
    .telegram-status { font-size: 11px; color: #0a84ff; }
    .telegram-messages { 
      background: #000; 
      padding: 12px; 
      height: 200px; 
      display: flex; 
      flex-direction: column; 
      gap: 8px; 
    }
    .msg { 
      max-width: 80%; 
      padding: 8px 12px; 
      border-radius: 18px; 
      font-size: 13px; 
      line-height: 1.3; 
      opacity: 0; 
      transform: translateY(10px); 
      transition: all 0.3s; 
    }
    .msg.show { opacity: 1; transform: translateY(0); }
    .msg-user { background: #0a84ff; align-self: flex-end; border-bottom-right-radius: 4px; }
    .msg-bot { background: #2c2c2e; align-self: flex-start; border-bottom-left-radius: 4px; }
    
    .sheet { 
      width: 200px; 
      background: rgba(26, 26, 26, 0.9); 
      border-radius: 16px; 
      overflow: hidden; 
      box-shadow: 0 20px 60px rgba(0,0,0,0.5); 
      border: 1px solid rgba(255,255,255,0.05); 
    }
    .sheet-header { 
      background: #0d7a3f; 
      padding: 10px 14px; 
      display: flex; 
      align-items: center; 
      gap: 8px; 
    }
    .sheet-icon { 
      width: 20px; 
      height: 20px; 
      background: white; 
      border-radius: 4px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
    }
    .sheet-title { font-size: 13px; font-weight: 500; }
    .sheet-grid { font-size: 12px; }
    .sheet-grid th, .sheet-grid td { 
      padding: 8px 12px; 
      border: 1px solid rgba(255,255,255,0.08); 
      text-align: left; 
    }
    .sheet-grid th { 
      background: rgba(255,255,255,0.03); 
      font-weight: 500; 
      color: rgba(255,255,255,0.5); 
    }
    .sheet-grid .amount { color: #4ade80; font-weight: 600; }
    .sheet-grid .empty-row { color: rgba(255,255,255,0.2); }
    
    .glide-container { position: relative; width: 120px; height: 40px; }
    .glide-line { 
      position: absolute; 
      top: 50%; 
      left: 0; 
      right: 0; 
      height: 2px; 
      background: linear-gradient(90deg, rgba(255,107,53,0.1), rgba(255,107,53,0.3), rgba(255,107,53,0.1)); 
    }
    .glide-logo { 
      position: absolute; 
      top: 50%; 
      left: 0; 
      transform: translateY(-50%); 
      width: 36px; 
      height: 36px; 
      background: linear-gradient(135deg, #FF6B35, #FF8B5E); 
      border-radius: 10px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: 800; 
      font-size: 16px; 
      opacity: 0; 
      box-shadow: 0 0 30px rgba(255,107,53,0.6); 
    }
    .glide-logo.animate { animation: glide 1.5s ease-in-out forwards; }
    
    .animated-logo-ultra-simple {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      height: 70px;
    }
    
    .logo-telegram-xl {
      animation: pulseTelegramXL 2s ease-in-out infinite;
    }
    
    @keyframes pulseTelegramXL {
      0%, 100% { 
        transform: scale(1); 
      }
      50% { 
        transform: scale(1.12); 
      }
    }
    
    .pulse-container {
      position: relative;
      width: 50px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .pulse-wave {
      position: absolute;
      width: 12px;
      height: 12px;
      background: linear-gradient(135deg, #FF6B35, #FF8B5E);
      border-radius: 50%;
      opacity: 0;
    }
    
    .wave1 {
      animation: pulseWave 2s ease-out infinite;
      animation-delay: 0s;
    }
    
    .wave2 {
      animation: pulseWave 2s ease-out infinite;
      animation-delay: 0.3s;
    }
    
    .wave3 {
      animation: pulseWave 2s ease-out infinite;
      animation-delay: 0.6s;
    }
    
    .wave4 {
      animation: pulseWave 2s ease-out infinite;
      animation-delay: 0.9s;
    }
    
    @keyframes pulseWave {
      0% {
        left: 0;
        opacity: 0;
        transform: scale(1);
      }
      15% {
        opacity: 1;
      }
      70% {
        opacity: 0.5;
      }
      100% {
        left: 40px;
        opacity: 0;
        transform: scale(0.5);
      }
    }
    
    .logo-spreadsheet-xl {
      animation: pulseSpreadsheet 2s ease-in-out infinite;
    }
    
    @keyframes pulseSpreadsheet {
      0%, 30%, 100% { 
        transform: scale(1); 
      }
      75%, 85% { 
        transform: scale(1.1); 
      }
    }
    
    .cell-fill {
      animation-duration: 2s;
      animation-iteration-count: infinite;
      animation-timing-function: ease-in-out;
    }
    
    .cell-fill-1 {
      animation-name: fillCell1;
    }
    
    .cell-fill-2 {
      animation-name: fillCell2;
    }
    
    .cell-fill-3 {
      animation-name: fillCell3;
    }
    
    .cell-fill-4 {
      animation-name: fillCell4;
    }
    
    @keyframes fillCell1 {
      0%, 40% { opacity: 0; }
      50% { opacity: 0.9; }
      100% { opacity: 0.9; }
    }
    
    @keyframes fillCell2 {
      0%, 45% { opacity: 0; }
      55% { opacity: 0.9; }
      100% { opacity: 0.9; }
    }
    
    @keyframes fillCell3 {
      0%, 50% { opacity: 0; }
      60% { opacity: 0.9; }
      100% { opacity: 0.9; }
    }
    
    @keyframes fillCell4 {
      0%, 55% { opacity: 0; }
      65% { opacity: 0.9; }
      100% { opacity: 0.9; }
    }
    
    .module-card {
      background: linear-gradient(135deg, rgba(255,107,53,0.08) 0%, rgba(255,107,53,0.02) 100%);
      border: 2px solid rgba(255,107,53,0.2);
      border-radius: 24px;
      padding: 24px;
      min-width: 280px;
      max-width: 320px;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
    }
    .module-card:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: rgba(255,107,53,0.4);
      box-shadow: 0 16px 48px rgba(255,107,53,0.3);
    }
    
    
    .badge-new { 
      background: linear-gradient(135deg, rgba(255,107,53,0.3), rgba(255,139,94,0.2)); 
      color: #FF8B5E; 
      border: 1px solid rgba(255,107,53,0.5); 
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-block;
      animation: badgeGlow 2s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(255,107,53,0.4);
    }
    @keyframes badgeGlow {
      0%, 100% { box-shadow: 0 0 20px rgba(255,107,53,0.4); }
      50% { box-shadow: 0 0 35px rgba(255,107,53,0.7), 0 0 50px rgba(255,107,53,0.5); }
    }
    
    .modal-backdrop { 
      position: fixed; 
      inset: 0; 
      background: rgba(0,0,0,0.7); 
      backdrop-filter: blur(16px); 
      -webkit-backdrop-filter: blur(16px);
      z-index: 100; 
      opacity: 0; 
      pointer-events: none; 
      transition: all 0.4s ease; 
    }
    .modal-backdrop.active { opacity: 1; pointer-events: all; }
    
    .modal-content { 
      position: fixed; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%) scale(0.9); 
      background: rgba(15, 15, 15, 0.75); 
      backdrop-filter: blur(50px); 
      -webkit-backdrop-filter: blur(50px);
      border: 1px solid rgba(255,255,255,0.15); 
      border-radius: 32px; 
      padding: 40px; 
      width: 90%; 
      max-width: 440px; 
      z-index: 101; 
      opacity: 0; 
      pointer-events: none; 
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
      box-shadow: 0 30px 90px rgba(0,0,0,0.9), 
                  0 0 0 1px rgba(255,107,53,0.15),
                  inset 0 1px 0 rgba(255,255,255,0.1);
    }
    .modal-content.active { 
      opacity: 1; 
      transform: translate(-50%, -50%) scale(1); 
      pointer-events: all; 
    }
    
    .modal-close { 
      position: absolute; 
      top: 16px; 
      right: 16px; 
      width: 36px; 
      height: 36px; 
      background: rgba(255,255,255,0.05); 
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      cursor: pointer; 
      transition: all 0.3s; 
    }
    .modal-close:hover { 
      background: rgba(255,255,255,0.12); 
      transform: rotate(90deg); 
    }
    
    .input-field { 
      background: rgba(255,255,255,0.04); 
      border: 1px solid rgba(255,255,255,0.1); 
      border-radius: 14px; 
      padding: 16px 18px; 
      color: white; 
      width: 100%; 
      font-size: 15px; 
      transition: all 0.3s; 
    }
    .input-field:focus { 
      outline: none; 
      border-color: rgba(255,107,53,0.5); 
      background: rgba(255,255,255,0.06);
      box-shadow: 0 0 0 4px rgba(255,107,53,0.1); 
    }
    .input-field::placeholder { color: rgba(255,255,255,0.3); }
    
    .tab-container { 
      display: flex; 
      background: rgba(255,255,255,0.04); 
      border-radius: 14px; 
      padding: 5px; 
      margin-bottom: 28px;
      position: relative;
    }
    
    .tab-indicator {
      position: absolute;
      top: 5px;
      left: 5px;
      width: calc(50% - 5px);
      height: calc(100% - 10px);
      background: linear-gradient(135deg, #FF6B35 0%, #FF8B5E 100%);
      border-radius: 11px;
      transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(255,107,53,0.3);
      z-index: 0;
    }
    
    .tab-indicator.slide-right {
      transform: translateX(calc(100% + 5px));
    }
    
    .tab-btn { 
      flex: 1; 
      padding: 12px; 
      border-radius: 11px; 
      font-size: 14px; 
      font-weight: 600; 
      color: rgba(255,255,255,0.5); 
      background: transparent; 
      border: none; 
      cursor: pointer; 
      transition: color 0.3s; 
      z-index: 1;
      position: relative;
    }
    .tab-btn.active { 
      color: white;
    }
    
    .error-msg { 
      background: rgba(239,68,68,0.12); 
      border: 1px solid rgba(239,68,68,0.3); 
      border-radius: 12px; 
      padding: 12px 16px; 
      color: #ef4444; 
      font-size: 13px; 
      display: none; 
    }
    .error-msg.show { display: block; }
    
    .robot-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 14px;
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: default;
    }
    .robot-card:hover {
      background: rgba(255, 255, 255, 0.04);
      border-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-4px);
    }
    .robot-emoji {
      animation: floatRobot 3s ease-in-out infinite;
      filter: grayscale(0.3) opacity(0.7);
    }
    .robot-card:nth-child(1) .robot-emoji { animation-delay: 0s; }
    .robot-card:nth-child(2) .robot-emoji { animation-delay: 0.2s; }
    .robot-card:nth-child(3) .robot-emoji { animation-delay: 0.4s; }
    .robot-card:nth-child(4) .robot-emoji { animation-delay: 0.6s; }
    .robot-card:nth-child(5) .robot-emoji { animation-delay: 0.8s; }
    .robot-plus-card {
      background: rgba(255, 107, 53, 0.05);
      border-color: rgba(255, 107, 53, 0.2);
    }
    @keyframes floatRobot {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-8px) rotate(2deg); }
      75% { transform: translateY(-4px) rotate(-2deg); }
    }
    
    @keyframes fillCell {
      0% { 
        background: rgba(255, 107, 53, 0.5); 
        box-shadow: 0 0 20px rgba(255, 107, 53, 0.6);
        transform: scale(1.08);
      }
      100% { 
        background: transparent; 
        box-shadow: none;
        transform: scale(1);
      }
    }
    .cell-filled {
      animation: fillCell 0.8s ease-out;
    }
    
    footer a {
      color: rgba(255,255,255,0.4);
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
    }
    footer a:hover {
      color: #FF8B5E;
      text-shadow: 0 0 20px rgba(255,139,94,0.5);
      transform: translateY(-2px);
    }
    
    /* POPUP OAUTH */
    .oauth-popup-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(20px);z-index:9998;opacity:0;pointer-events:none;transition:opacity .4s}
    .oauth-popup-backdrop.active{opacity:1;pointer-events:all}
    .oauth-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.9);background:rgba(20,20,20,.95);backdrop-filter:blur(40px);border:1px solid rgba(255,255,255,.1);border-radius:32px;padding:48px 40px;width:90%;max-width:440px;z-index:9999;opacity:0;pointer-events:none;transition:all .5s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 40px 120px rgba(0,0,0,.9),0 0 0 1px rgba(255,107,53,.1),inset 0 1px 0 rgba(255,255,255,.05)}
    .oauth-popup.active{opacity:1;transform:translate(-50%,-50%) scale(1);pointer-events:all}
    .oauth-popup-close{position:absolute;top:20px;right:20px;width:36px;height:36px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;color:rgba(255,255,255,.5)}
    .oauth-popup-close:hover{background:rgba(255,255,255,.1);transform:rotate(90deg);color:#fff}
    .oauth-popup-logo{width:80px;height:80px;margin:0 auto 24px;background:linear-gradient(135deg,#FF6B35,#FF8B5E);border-radius:24px;display:flex;align-items:center;justify-content:center;font-size:40px;font-weight:800;box-shadow:0 20px 60px rgba(255,107,53,.4);animation:popupLogoPulse 2s ease-in-out infinite}
    @keyframes popupLogoPulse{0%,100%{transform:scale(1);box-shadow:0 20px 60px rgba(255,107,53,.4)}50%{transform:scale(1.05);box-shadow:0 25px 80px rgba(255,107,53,.6)}}
    .oauth-popup h2{font-size:28px;font-weight:700;margin-bottom:12px;text-align:center;background:linear-gradient(135deg,#fff,#f0f0f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .oauth-popup p{color:rgba(255,255,255,.5);font-size:15px;text-align:center;margin-bottom:32px;line-height:1.6}
    .btn-google-popup{width:100%;background:#fff;color:#3c4043;border:none;border-radius:16px;padding:18px 24px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:14px;cursor:pointer;transition:all .3s;box-shadow:0 4px 20px rgba(255,255,255,.15);font-family:'Space Grotesk',sans-serif}
    .btn-google-popup:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(255,255,255,.25)}
    .oauth-separator{display:flex;align-items:center;gap:16px;margin:28px 0}
    .oauth-separator::before,.oauth-separator::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent)}
    .oauth-separator span{color:rgba(255,255,255,.3);font-size:13px;font-weight:500;text-transform:uppercase}
    .btn-email-popup{width:100%;background:linear-gradient(135deg,rgba(255,107,53,.12),rgba(255,107,53,.06));border:1px solid rgba(255,107,53,.25);color:#fff;border-radius:16px;padding:18px 24px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:12px;cursor:pointer;transition:all .3s;font-family:'Space Grotesk',sans-serif}
    .btn-email-popup:hover{background:linear-gradient(135deg,rgba(255,107,53,.18),rgba(255,107,53,.1));transform:translateY(-2px)}
    .oauth-security-badge{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:24px;padding:12px 18px;background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.15);border-radius:12px;font-size:13px;color:rgba(255,255,255,.6)}
    
    @media (max-width: 768px) {
      .hero-demo { flex-direction: column !important; align-items: center; gap: 20px; }
      .iphone, .sheet { width: 200px; }
      .glide-container { transform: rotate(90deg); height: 80px; margin: 20px 0; }
      .module-card { min-width: 260px; }
      .robot-card { width: 48px; height: 48px; font-size: 24px; }
    }
  
.nav-user-section {
  display: flex;
  align-items: center;
  gap: 12px;
}

.nav-profile {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 16px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  text-decoration: none;
  color: white;
  transition: all 0.3s;
  font-weight: 500;
}

.nav-profile:hover {
  background: rgba(255,255,255,0.08);
  border-color: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

.nav-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255,107,53,0.3);
}

  </style>
</head>
<body class="bg-gradient-animate">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>

  <nav class="glass fixed top-0 left-0 right-0 z-50 animate-fade-in-down">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <div class="logo-i">i</div>
        <span class="font-semibold text-lg">iArmy</span>
      </a>
      <div id="auth-buttons"></div>
    </div>
  </nav>

  <section class="min-h-screen flex items-center justify-center px-6 pt-20 relative z-10">
    <div class="max-w-6xl mx-auto text-center">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 animate-fade-in-up">
        Une arm√©e de robots<br>pour ton <span style="color:#FF8B5E">quotidien</span>
      </h1>
      <p class="text-lg md:text-xl text-white/50 mb-12 animate-fade-in-up delay-100">
        Gagne du temps. On s'occupe du reste.
      </p>
      
      <div class="hero-demo flex items-center justify-center gap-8 mb-12 animate-fade-in-up delay-200" style="display:flex; flex-direction:row;">
        <div class="iphone animate-float">
          <div class="iphone-screen">
            <div class="iphone-notch"></div>
            <div class="telegram-header">
              <span class="telegram-back">‚Äπ</span>
              <div class="telegram-avatar">i</div>
              <div class="text-left">
                <div class="telegram-name">iArmy Bot</div>
                <div class="telegram-status">en ligne</div>
              </div>
            </div>
            <div class="telegram-messages" id="telegram-messages"></div>
          </div>
        </div>
        
        <div class="glide-container hidden md:block">
          <div class="glide-line"></div>
          <div class="glide-logo" id="glide-logo">i</div>
        </div>
        
        <div class="sheet animate-float" style="animation-delay: -2s;">
          <div class="sheet-header">
            <div class="sheet-icon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="#0d7a3f"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H6v-2h6v2zm4-4H6v-2h10v2zm0-4H6V7h10v2z"/></svg>
            </div>
            <span class="sheet-title">Compta 2026</span>
          </div>
          <table class="sheet-grid" style="width:100%">
            <thead><tr><th>Date</th><th>Type</th><th>‚Ç¨</th></tr></thead>
            <tbody id="spreadsheet-body">
              <tr><td>08/01</td><td>CB</td><td class="amount">850</td></tr>
              <tr><td>08/01</td><td>ESP</td><td class="amount">120</td></tr>
              <tr class="empty-row" id="empty-1"><td class="empty-row">-</td><td class="empty-row">-</td><td class="empty-row">-</td></tr>
              <tr class="empty-row" id="empty-2"><td class="empty-row">-</td><td class="empty-row">-</td><td class="empty-row">-</td></tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="animate-fade-in-up delay-300">
        <button onclick="launchRobot()" class="btn-primary text-lg px-10 py-4">
          Lancer mon robot ‚Üí
        </button>
        <p class="text-white/30 text-sm mt-4">7 jours d'essai gratuit</p>
      </div>
    </div>
  </section>

  <section class="py-20 px-6 relative z-10">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-12">
        <span class="text-white/30 text-sm uppercase tracking-widest">‚ú® Nouveau module disponible</span>
      </div>
      
      <div style="display: flex; justify-content: center;">
        <div class="module-card" onclick="launchRobot()">
          <div class="flex items-center gap-3 mb-4">
            <span class="badge-new">üéâ NOUVEAU</span>
          </div>
          
          <div style="display:flex; justify-content:center; margin-bottom:20px;">
            <div class="animated-logo-ultra-simple">
              <div class="logo-telegram-xl">
                <svg width="56" height="56" viewBox="0 0 240 240">
                  <defs>
                    <linearGradient id="tg-grad-xl" x1="50%" x2="50%" y1="0%" y2="100%">
                      <stop offset="0%" stop-color="#2AABEE"/>
                      <stop offset="100%" stop-color="#229ED9"/>
                    </linearGradient>
                  </defs>
                  <circle cx="120" cy="120" r="120" fill="url(#tg-grad-xl)"/>
                  <path fill="#fff" d="M81.229 128.772l14.237 39.406s1.78 3.687 3.686 3.687 30.255-29.492 30.255-29.492l31.525-60.89L81.737 118.6z"/>
                  <path fill="#d5e6f3" d="M100.106 138.878l-2.733 29.046s-1.144 8.9 7.754 0 17.415-15.763 17.415-15.763"/>
                  <path fill="#b5cfe4" d="M81.486 130.178l-17.8-5.467s-2.006-.808-1.366-2.671c.143-.42.522-.72 1.773-1.5 5.912-3.686 108.297-41.223 108.297-41.223s1.928-.6 3.277-.138a1.7 1.7 0 011.377 1.152c.118.58.138 1.368.138 2.14 0 .663-.06 1.41-.06 2.292-.469 8.312-14.237 90.178-14.237 90.178s-.803 3.262-3.686 3.372c-1.99.067-5.104-1.29-6.897-2.352-1.467-.874-27.523-17.598-37.06-25.67-.832-.704-1.68-2.026-.06-3.63 3.673-3.64 8.047-8.047 17.05-16.5 2.006-1.89 4.032-6.297-4.365-1.072l-23.27 15.555s-2.667 1.654-7.617.18c-1.69-.505-3.57-1.06-6.347-1.965-2.37-.77-4.902-1.654-4.16-3.464.488-1.222 1.41-2.24 4.838-3.532z"/>
                </svg>
              </div>
              
              <div class="pulse-container">
                <div class="pulse-wave wave1"></div>
                <div class="pulse-wave wave2"></div>
                <div class="pulse-wave wave3"></div>
                <div class="pulse-wave wave4"></div>
              </div>
              
              <div class="logo-spreadsheet-xl">
                <svg width="56" height="56" viewBox="0 0 56 56">
                  <defs>
                    <linearGradient id="sheet-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                      <stop offset="0%" stop-color="#0f9d58"/>
                      <stop offset="100%" stop-color="#0a7e3e"/>
                    </linearGradient>
                  </defs>
                  
                  <rect x="8" y="8" width="40" height="40" rx="6" fill="url(#sheet-grad)"/>
                  
                  <line x1="12" y1="20" x2="44" y2="20" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/>
                  <line x1="12" y1="28" x2="44" y2="28" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/>
                  <line x1="12" y1="36" x2="44" y2="36" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/>
                  
                  <line x1="22" y1="12" x2="22" y2="44" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/>
                  <line x1="34" y1="12" x2="34" y2="44" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/>
                  
                  <rect class="cell-fill cell-fill-1" x="12" y="28" width="10" height="8" fill="#4ade80" opacity="0"/>
                  <rect class="cell-fill cell-fill-2" x="22" y="28" width="12" height="8" fill="#4ade80" opacity="0"/>
                  <rect class="cell-fill cell-fill-3" x="34" y="28" width="10" height="8" fill="#4ade80" opacity="0"/>
                  <rect class="cell-fill cell-fill-4" x="12" y="36" width="10" height="8" fill="#4ade80" opacity="0"/>
                </svg>
              </div>
            </div>
          </div>
          
          <h3 style="font-size:24px; font-weight:700; margin-bottom:12px; text-align:center;">Compta Express</h3>
          
          <p style="color:rgba(255,255,255,0.5); font-size:14px; line-height:1.6; text-align:center; margin-bottom:16px;">
            Envoie tes recettes via <strong style="color:#0088cc;">Telegram</strong><br>
            √âcrit auto dans <strong style="color:#0f9d58;">Google Sheets</strong>
          </p>
          
          <div style="text-align:center; padding:12px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.05); margin-bottom:12px;">
            <div style="font-size:12px; color:rgba(255,255,255,0.4); margin-bottom:4px;">Pour</div>
            <div style="font-size:13px; color:rgba(255,255,255,0.6); font-weight:600;">Comptabilit√© & Finance</div>
          </div>
          
          <div style="display:flex; align-items:center; justify-content:center; gap:8px; flex-wrap:wrap;">
            <span style="padding:4px 10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.06); border-radius:12px; font-size:10px; color:rgba(255,255,255,0.35); font-weight:500;">üçï Restaurant</span>
            <span style="padding:4px 10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.06); border-radius:12px; font-size:10px; color:rgba(255,255,255,0.35); font-weight:500;">üè™ Commerce</span>
            <span style="padding:4px 10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.06); border-radius:12px; font-size:10px; color:rgba(255,255,255,0.35); font-weight:500;">üç∏ Bar</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-12 px-6 relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      <p style="color:rgba(255,255,255,0.5); font-size:16px; margin-bottom:24px;">D'autres modules arrivent tr√®s vite</p>
      <div style="display:flex; align-items:center; justify-content:center; gap:16px; flex-wrap:wrap;">
        <div class="robot-card"><span class="robot-emoji">ü§ñ</span></div>
        <div class="robot-card"><span class="robot-emoji">ü§ñ</span></div>
        <div class="robot-card"><span class="robot-emoji">ü§ñ</span></div>
        <div class="robot-card"><span class="robot-emoji">ü§ñ</span></div>
        <div class="robot-card"><span class="robot-emoji">ü§ñ</span></div>
        <div class="robot-card robot-plus-card"><span style="font-size:32px; color:rgba(255,255,255,0.4); font-weight:300;">+</span></div>
      </div>
    </div>
  </section>

  <footer style="padding:40px 24px; background:rgba(0,0,0,0.3); border-top:1px solid rgba(255,255,255,0.05);">
    <div class="max-w-4xl mx-auto">
      <div style="display:flex; flex-direction:column; align-items:center; justify-content:space-between; gap:24px;">
        <div style="display:flex; align-items:center; gap:24px; font-size:14px; color:rgba(255,255,255,0.4);">
          <a href="index.html" style="color:inherit; text-decoration:none;">Accueil</a>
          <a href="compte.html" style="color:inherit; text-decoration:none;">Mon compte</a>
          <a href="/cdn-cgi/l/email-protection#0f6c60617b6e6c7b4f666e7d627621697d" style="color:inherit; text-decoration:none;">Contact</a>
        </div>
        <p style="color:rgba(255,255,255,0.3); font-size:13px;">¬© 2026 iArmy</p>
      </div>
    </div>
  </footer>

  <div class="modal-backdrop" id="modal-backdrop" onclick="closeModal()"></div>
  <div class="modal-content" id="modal-content">
    <div class="modal-close" onclick="closeModal()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </div>
    
    <h2 style="font-size:24px; font-weight:700; margin-bottom:8px; text-align:center;">Bienvenue sur iArmy</h2>
    <p style="color:rgba(255,255,255,0.5); font-size:14px; margin-bottom:28px; text-align:center;">Connecte-toi pour lancer tes robots</p>
    
    <button onclick="handleGoogleAuth()" style="width:100%; background:white; color:#3c4043; border:none; border-radius:14px; padding:14px 20px; font-size:15px; font-weight:600; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; transition:all 0.3s; box-shadow:0 2px 4px rgba(0,0,0,0.1); margin-bottom:24px; font-family:'Space Grotesk', sans-serif;">
      <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
      <span>Continuer avec Google</span>
    </button>
    
    <div style="display:flex; align-items:center; gap:16px; margin-bottom:24px;">
      <div style="flex:1; height:1px; background:rgba(255,255,255,0.1);"></div>
      <span style="color:rgba(255,255,255,0.4); font-size:13px;">ou</span>
      <div style="flex:1; height:1px; background:rgba(255,255,255,0.1);"></div>
    </div>
    
    <div class="tab-container">
      <div class="tab-indicator" id="tab-indicator"></div>
      <button class="tab-btn active" id="tab-login" onclick="switchTab('login')">Connexion</button>
      <button class="tab-btn" id="tab-register" onclick="switchTab('register')">Inscription</button>
    </div>
    <div id="login-form">
      <div class="error-msg mb-4" id="login-error"></div>
      <form onsubmit="handleLogin(event)">
        <input type="email" id="login-email" class="input-field mb-3" placeholder="Email" required>
        <input type="password" id="login-password" class="input-field mb-4" placeholder="Mot de passe" required>
        <button type="submit" class="btn-primary" style="width:100%;" id="login-btn">Se connecter</button>
      </form>
      <p style="text-align:center; margin-top:16px;"><a href="reset-password.html" style="color:rgba(255,255,255,0.4); font-size:14px; text-decoration:none;">Mot de passe oubli√© ?</a></p>
    </div>
    <div id="register-form" style="display:none;">
      <div class="error-msg mb-4" id="register-error"></div>
      <form onsubmit="handleRegister(event)">
        <input type="text" id="register-name" class="input-field mb-3" placeholder="Nom complet" required>
        <input type="email" id="register-email" class="input-field mb-3" placeholder="Email" required>
        <input type="password" id="register-password" class="input-field mb-4" placeholder="Mot de passe (6 car. min)" required minlength="6">
        <button type="submit" class="btn-primary" style="width:100%;" id="register-btn">Cr√©er mon compte</button>
      </form>
    </div>
  </div>

  <div class="oauth-popup-backdrop" id="oauth-popup-backdrop" onclick="closeOAuthPopup()"></div>
  <div class="oauth-popup" id="oauth-popup">
    <button class="oauth-popup-close" onclick="closeOAuthPopup()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
    <div class="oauth-popup-logo">i</div>
    <h2>Connecte-toi √† iArmy</h2>
    <p>Choisis ta m√©thode de connexion</p>
    <button class="btn-google-popup" onclick="handleGoogleAuthPopup()">
      <svg width="24" height="24" viewBox="0 0 48 48">
        <path fill="#4285F4" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/>
        <path fill="#34A853" d="M6.3 14.7l6.6 4.8C14.1 16.2 18.7 13 24 13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 16.1 2 9.3 6.2 6.3 14.7z"/>
        <path fill="#FBBC05" d="M24 46c5.5 0 10.3-2 14.1-5.3l-6.5-5.5C29.5 37 26.9 38 24 38c-6.1 0-11.2-3.9-13.1-9.3l-6.6 5.1C7.3 41.4 15.1 46 24 46z"/>
        <path fill="#EA4335" d="M46.5 20H24v8.5h11.8c-.8 2.4-2.3 4.5-4.3 6l6.5 5.5C41.8 36.5 46 30.9 46 24c0-1.3-.1-2.6-.5-4z"/>
      </svg>
      <span>Continuer avec Google</span>
    </button>
    <div class="oauth-separator"><span>ou</span></div>
    <button class="btn-email-popup" onclick="showEmailForm()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
        <polyline points="22,6 12,13 2,6"/>
      </svg>
      <span>Connexion par email</span>
    </button>
    <div class="oauth-security-badge">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="color:#4ade80">
        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
      </svg>
      <span>Connexion s√©curis√©e ‚Ä¢ Donn√©es chiffr√©es</span>
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    const SUPABASE_URL = 'https://byqfnpdcnifauhwgetcq.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ5cWZucGRjbmlmYXVod2dldGNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4ODY1MTIsImV4cCI6MjA4MzQ2MjUxMn0.1W2OaRb0sApMvrG_28AoV2zUFAzrptzpwbR1c65tOPo';
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    
    let currentUser = null;

    function runDemo() {
      const container = document.getElementById('telegram-messages');
      const glideLogo = document.getElementById('glide-logo');
      const empty1 = document.getElementById('empty-1');
      const empty2 = document.getElementById('empty-2');
      
      container.innerHTML = '';
      glideLogo?.classList.remove('animate');
      if (empty1) {
        empty1.innerHTML = '<td class="empty-row">-</td><td class="empty-row">-</td><td class="empty-row">-</td>';
        empty1.classList.add('empty-row');
      }
      if (empty2) {
        empty2.innerHTML = '<td class="empty-row">-</td><td class="empty-row">-</td><td class="empty-row">-</td>';
        empty2.classList.add('empty-row');
      }
      
      setTimeout(() => {
        const msg1 = document.createElement('div');
        msg1.className = 'msg msg-user';
        msg1.textContent = 'cb 1200 esp 350';
        container.appendChild(msg1);
        setTimeout(() => msg1.classList.add('show'), 50);
      }, 500);
      
      setTimeout(() => glideLogo?.classList.add('animate'), 1500);
      
      setTimeout(() => {
        const msg2 = document.createElement('div');
        msg2.className = 'msg msg-bot';
        msg2.innerHTML = '‚úÖ Not√© !<br>CB: 1 200‚Ç¨<br>Esp√®ces: 350‚Ç¨';
        container.appendChild(msg2);
        setTimeout(() => msg2.classList.add('show'), 50);
      }, 2500);
      
      setTimeout(() => {
        if (empty1) {
          empty1.innerHTML = '<td>09/01</td><td>CB</td><td class="amount">1 200</td>';
          empty1.classList.remove('empty-row');
          empty1.classList.add('cell-filled');
        }
        setTimeout(() => {
          if (empty2) {
            empty2.innerHTML = '<td>09/01</td><td>ESP</td><td class="amount">350</td>';
            empty2.classList.remove('empty-row');
            empty2.classList.add('cell-filled');
          }
        }, 300);
      }, 2800);
    }
    
    setTimeout(runDemo, 1000);
    setInterval(runDemo, 8000);

    function launchRobot() { window.location.href = 'compta.html'; }

    
    async function updateNavBar() {
      const { data: { session } } = await supabaseClient.auth.getSession();
      
      const authButtons = document.getElementById('auth-buttons');
      
      if (!session) {
        authButtons.innerHTML = `
          <button onclick="openModal('login')" class="btn-secondary text-sm px-5 py-2.5 mr-2 hidden sm:inline-block">Connexion</button>
          <button onclick="openModal('register')" class="btn-primary text-sm px-5 py-2.5">Inscription</button>
        `;
        return;
      }
      
      const { data: profile } = await supabaseClient
        .from('profiles')
        .select('first_name, avatar_url')
        .eq('user_id', session.user.id)
        .single();
      
      if (!profile) {
        authButtons.innerHTML = `
          <div class="nav-user-section">
            <a href="compte.html" class="btn-primary text-sm px-6 py-2.5">Mon espace</a>
            <button onclick="signOut()" class="btn-logout">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              <span>D√©connexion</span>
            </button>
          </div>
        `;
        return;
      }
      
      authButtons.innerHTML = `
        <div class="nav-user-section">
          <a href="compte.html" class="nav-profile">
            <img src="${profile.avatar_url}" class="nav-avatar">
            <span>${profile.first_name}</span>
          </a>
          <button onclick="signOut()" class="btn-logout">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>D√©connexion</span>
          </button>
        </div>
      `;
    }
    
async function checkAuth() {
      const { data: { user } } = await supabaseClient.auth.getUser();
      currentUser = user;
      updateNavBar();
      if (window.location.hash.includes('access_token')) window.location.href = 'compte.html';
    }

    function updateAuthButtons_OLD() {
      const c = document.getElementById('auth-buttons');
      c.innerHTML = currentUser 
        ? `<div style="display:flex;align-items:center;gap:12px"><a href="compte.html" class="btn-primary text-sm px-6 py-2.5">Mon espace</a><button onclick="signOut()" class="btn-logout"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg><span>D√©connexion</span></button></div>`
        : `<button onclick="openModal('login')" class="btn-secondary text-sm px-5 py-2.5 mr-2 hidden sm:inline-block">Connexion</button><button onclick="openModal('register')" class="btn-primary text-sm px-5 py-2.5">Inscription</button>`;
    }
    
    async function signOut() {
      await supabaseClient.auth.signOut();
      window.location.reload();
    }

    function openModal(tab = 'login') {
      document.getElementById('modal-backdrop').classList.add('active');
      document.getElementById('modal-content').classList.add('active');
      document.body.style.overflow = 'hidden';
      switchTab(tab);
    }

    function closeModal() {
      document.getElementById('modal-backdrop').classList.remove('active');
      document.getElementById('modal-content').classList.remove('active');
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    async function handleGoogleAuth(){openOAuthPopup()}
    function openOAuthPopup(){document.getElementById('oauth-popup-backdrop').classList.add('active');document.getElementById('oauth-popup').classList.add('active');document.body.style.overflow='hidden'}
    function closeOAuthPopup(){document.getElementById('oauth-popup-backdrop').classList.remove('active');document.getElementById('oauth-popup').classList.remove('active');document.body.style.overflow=''}
    document.addEventListener('keydown',e=>{if(e.key==='Escape')closeOAuthPopup()});
    async function handleGoogleAuthPopup(){try{const btn=document.querySelector('.btn-google-popup');if(btn){btn.classList.add('loading');const span=btn.querySelector('span');if(span)span.textContent='Connexion...'}const GOOGLE_CLIENT_ID='550060390462-snigimurfjktpnf13ip48cv5ioork1ur0.apps.googleusercontent.com';const REDIRECT_URI=window.location.origin+window.location.pathname;const SCOPES=['https://www.googleapis.com/auth/spreadsheets','https://www.googleapis.com/auth/userinfo.email'].join(' ');const authUrl=new URL('https://accounts.google.com/o/oauth2/v2/auth');authUrl.searchParams.set('client_id',GOOGLE_CLIENT_ID);authUrl.searchParams.set('redirect_uri',REDIRECT_URI);authUrl.searchParams.set('response_type','code');authUrl.searchParams.set('scope',SCOPES);authUrl.searchParams.set('access_type','offline');authUrl.searchParams.set('prompt','consent');authUrl.searchParams.set('state','google_auth');window.location.href=authUrl.toString()}catch(error){console.error('Google auth error:',error);alert('Erreur: '+error.message)}}
    function showEmailForm(){closeOAuthPopup();if(typeof openModal==='function')openModal('register')}

    async function handleOAuthCallback() {
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');
      const state = urlParams.get('state');
      
      if (!code || state !== 'google_auth') return;
      
      console.log('[OAUTH] Processing callback...');
      
      try {
        const { data: { session } } = await supabaseClient.auth.getSession();
        
        if (!session) {
          const { data: authData, error: authError } = await supabaseClient.auth.signInWithOAuth({
            provider: 'google',
            options: {
              redirectTo: window.location.origin + '/compte.html',
              scopes: 'https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/userinfo.email'
            }
          });
          
          if (authError) throw authError;
          return;
        }
        
        const response = await fetch(`${SUPABASE_URL}/functions/v1/smooth-endpoint`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${session.access_token}`,
            'apikey': SUPABASE_ANON_KEY
          },
          body: JSON.stringify({
            code: code,
            redirect_uri: window.location.origin + window.location.pathname
          })
        });
        
        const result = await response.json();
        
        if (!result.success) {
          throw new Error(result.error || 'Failed to connect Google account');
        }
        
        console.log('[OAUTH] Success!');
        window.history.replaceState({}, document.title, window.location.pathname);
        alert('‚úÖ Google Sheets connect√© avec succ√®s !');
        window.location.href = 'compte.html';
        
      } catch (error) {
        console.error('[OAUTH] Callback error:', error);
        alert('Erreur: ' + error.message);
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      handleOAuthCallback();
    });

    function switchTab(tab) {
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const loginTab = document.getElementById('tab-login');
      const registerTab = document.getElementById('tab-register');
      const indicator = document.getElementById('tab-indicator');
      
      loginTab.classList.toggle('active', tab === 'login');
      registerTab.classList.toggle('active', tab === 'register');
      
      if (tab === 'register') {
        indicator.classList.add('slide-right');
      } else {
        indicator.classList.remove('slide-right');
      }
      
      if (tab === 'login') {
        if (registerForm.style.display !== 'none') {
          registerForm.classList.add('slide-out-right');
          setTimeout(() => {
            registerForm.style.display = 'none';
            registerForm.classList.remove('slide-out-right');
            loginForm.style.display = 'block';
            loginForm.classList.add('slide-in-left');
            setTimeout(() => loginForm.classList.remove('slide-in-left'), 300);
          }, 300);
        } else {
          loginForm.style.display = 'block';
        }
      } else {
        if (loginForm.style.display !== 'none') {
          loginForm.classList.add('slide-out-left');
          setTimeout(() => {
            loginForm.style.display = 'none';
            loginForm.classList.remove('slide-out-left');
            registerForm.style.display = 'block';
            registerForm.classList.add('slide-in-right');
            setTimeout(() => registerForm.classList.remove('slide-in-right'), 300);
          }, 300);
        } else {
          registerForm.style.display = 'block';
        }
      }
    }

    async function handleLogin(e) {
      e.preventDefault();
      const btn = document.getElementById('login-btn');
      const err = document.getElementById('login-error');
      err.classList.remove('show'); btn.textContent = 'Connexion...'; btn.disabled = true;
      try {
        const { error } = await supabaseClient.auth.signInWithPassword({
          email: document.getElementById('login-email').value.trim(),
          password: document.getElementById('login-password').value
        });
        if (error) throw error;
        window.location.href = 'compte.html';
      } catch (error) {
        err.textContent = error.message === 'Invalid login credentials' ? 'Email ou mot de passe incorrect' : error.message;
        err.classList.add('show'); btn.textContent = 'Se connecter'; btn.disabled = false;
      }
    }

    async function handleRegister(e) {
      e.preventDefault();
      const btn = document.getElementById('register-btn');
      const err = document.getElementById('register-error');
      err.classList.remove('show'); btn.textContent = 'Cr√©ation...'; btn.disabled = true;
      try {
        const { data, error } = await supabaseClient.auth.signUp({
          email: document.getElementById('register-email').value.trim(),
          password: document.getElementById('register-password').value,
          options: { data: { name: document.getElementById('register-name').value.trim() } }
        });
        if (error) throw error;
        window.location.href = 'compte.html';
      } catch (error) {
        err.textContent = error.message === 'User already registered' ? 'Compte existant' : error.message;
        e
